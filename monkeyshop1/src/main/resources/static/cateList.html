<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
  <link rel="stylesheet" type="text/css" href="css/public.css"/>
  <link rel="stylesheet" type="text/css" href="css/proList.css"/>
</head>
<body>
<!----------------proList------------------------->
<ul class="proList wrapper clearfix" id="product-list">
  <li><a href="proDetail.html">
    <dl>
      <dt><img src="img/temp/pro01.jpg"></dt>
      <dd>【最家】跳舞兰仿真花干花</dd>
      <dd>￥17.90</dd>
    </dl>
  </a></li>
  <!--    <li><a href="proDetail.html">-->
  <!--        <dl>-->
  <!--            <dt><img src="img/temp/pro02.jpg"></dt>-->
  <!--            <dd>【最家】跳舞兰仿真花干花</dd>-->
  <!--            <dd>￥17.90</dd>-->
  <!--        </dl>-->
  <!--    </a></li>-->
  <!--    <li><a href="proDetail.html">-->
  <!--        <dl>-->
  <!--            <dt><img src="img/temp/pro03.jpg"></dt>-->
  <!--            <dd>【最家】跳舞兰仿真花干花</dd>-->
  <!--            <dd>￥17.90</dd>-->
  <!--        </dl>-->
  <!--    </a></li>-->
  <!--    <li><a href="proDetail.html">-->
  <!--        <dl>-->
  <!--            <dt><img src="img/temp/vase01.jpg"></dt>-->
  <!--            <dd>【最家】创意现代简约白瓷干花花瓶摆件</dd>-->
  <!--            <dd>￥17.90</dd>-->
  <!--        </dl>-->
  <!--    </a></li>-->
  <!--    <li><a href="proDetail.html">-->
  <!--        <dl>-->
  <!--            <dt><img src="img/temp/vase02.jpg"></dt>-->
  <!--            <dd>【最家】现代简约白色条纹干花花瓶摆件</dd>-->
  <!--            <dd>￥17.90</dd>-->
  <!--        </dl>-->
  <!--    </a></li>-->
  <!--    <li><a href="proDetail.html">-->
  <!--        <dl>-->
  <!--            <dt><img src="img/temp/vase03.jpg"></dt>-->
  <!--            <dd>【最家】北欧现代陶瓷花瓶摆件</dd>-->
  <!--            <dd>￥17.90</dd>-->
  <!--        </dl>-->
  <!--    </a></li>-->
  <!--    <li><a href="proDetail.html">-->
  <!--        <dl>-->
  <!--            <dt><img src="img/temp/vase04.jpg"></dt>-->
  <!--            <dd>【最家】现代简约客厅茶几白色陶瓷花瓶摆件</dd>-->
  <!--            <dd>￥17.90</dd>-->
  <!--        </dl>-->
  <!--    </a></li>-->
  <!--    <li><a href="proDetail.html">-->
  <!--        <dl>-->
  <!--            <dt><img src="img/temp/vase05.jpg"></dt>-->
  <!--            <dd>【最家】仿木纹漆金裂纹台面花瓶系列套装</dd>-->
  <!--            <dd>￥17.90</dd>-->
  <!--        </dl>-->
  <!--    </a></li>-->
  <!--    <li><a href="proDetail.html">-->
  <!--        <dl>-->
  <!--            <dt><img src="img/temp/vase06.jpg"></dt>-->
  <!--            <dd>【最家】仿木竖条纹雅致台面花瓶</dd>-->
  <!--            <dd>￥17.90</dd>-->
  <!--        </dl>-->
  <!--    </a></li>-->
  <!--    <li><a href="proDetail.html">-->
  <!--        <dl>-->
  <!--            <dt><img src="img/temp/pro04.jpg"></dt>-->
  <!--            <dd>【最家】跳舞兰仿真花干花</dd>-->
  <!--            <dd>￥17.90</dd>-->
  <!--        </dl>-->
  <!--    </a></li>-->
  <!--    <li><a href="proDetail.html">-->
  <!--        <dl>-->
  <!--            <dt><img src="img/temp/pro05.jpg"></dt>-->
  <!--            <dd>【最家】跳舞兰仿真花干花</dd>-->
  <!--            <dd>￥17.90</dd>-->
  <!--        </dl>-->
  <!--    </a></li>-->
  <!--    <li><a href="proDetail.html">-->
  <!--        <dl>-->
  <!--            <dt><img src="img/temp/pro06.jpg"></dt>-->
  <!--            <dd>【最家】跳舞兰仿真花干花</dd>-->
  <!--            <dd>￥17.90</dd>-->
  <!--        </dl>-->
  <!--    </a></li>-->
  <!--    <li><a href="proDetail.html">-->
  <!--        <dl>-->
  <!--            <dt><img src="img/temp/pro07.jpg"></dt>-->
  <!--            <dd>【最家】跳舞兰仿真花干花</dd>-->
  <!--            <dd>￥17.90</dd>-->
  <!--        </dl>-->
  <!--    </a></li>-->
  <!--    <li><a href="proDetail.html">-->
  <!--        <dl>-->
  <!--            <dt><img src="img/temp/pro08.jpg"></dt>-->
  <!--            <dd>【最家】跳舞兰仿真花干花</dd>-->
  <!--            <dd>￥17.90</dd>-->
  <!--        </dl>-->
  <!--    </a></li>-->
  <!--    <li><a href="proDetail.html">-->
  <!--        <dl>-->
  <!--            <dt><img src="img/temp/pro01.jpg"></dt>-->
  <!--            <dd>【最家】跳舞兰仿真花干花</dd>-->
  <!--            <dd>￥17.90</dd>-->
  <!--        </dl>-->
  <!--    </a></li>-->
  <!--    <li><a href="proDetail.html">-->
  <!--        <dl>-->
  <!--            <dt><img src="img/temp/pro02.jpg"></dt>-->
  <!--            <dd>【最家】跳舞兰仿真花干花</dd>-->
  <!--            <dd>￥17.90</dd>-->
  <!--        </dl>-->
  <!--    </a></li>-->
  <!--    <li><a href="proDetail.html">-->
  <!--        <dl>-->
  <!--            <dt><img src="img/temp/pro03.jpg"></dt>-->
  <!--            <dd>【最家】跳舞兰仿真花干花</dd>-->
  <!--            <dd>￥17.90</dd>-->
  <!--        </dl>-->
  <!--    </a></li>-->
  <!--    <li><a href="proDetail.html">-->
  <!--        <dl>-->
  <!--            <dt><img src="img/temp/pro04.jpg"></dt>-->
  <!--            <dd>【最家】跳舞兰仿真花干花</dd>-->
  <!--            <dd>￥17.90</dd>-->
  <!--        </dl>-->
  <!--    </a></li>-->
  <!--    <li><a href="proDetail.html">-->
  <!--        <dl>-->
  <!--            <dt><img src="img/temp/pro05.jpg"></dt>-->
  <!--            <dd>【最家】跳舞兰仿真花干花</dd>-->
  <!--            <dd>￥17.90</dd>-->
  <!--        </dl>-->
  <!--    </a></li>-->
  <!--    <li><a href="proDetail.html">-->
  <!--        <dl>-->
  <!--            <dt><img src="img/temp/pro06.jpg"></dt>-->
  <!--            <dd>【最家】跳舞兰仿真花干花</dd>-->
  <!--            <dd>￥17.90</dd>-->
  <!--        </dl>-->
  <!--    </a></li>-->
  <!--    <li><a href="proDetail.html">-->
  <!--        <dl>-->
  <!--            <dt><img src="img/temp/pro07.jpg"></dt>-->
  <!--            <dd>【最家】跳舞兰仿真花干花</dd>-->
  <!--            <dd>￥17.90</dd>-->
  <!--        </dl>-->
  <!--    </a></li>-->
  <!--    <li><a href="proDetail.html">-->
  <!--        <dl>-->
  <!--            <dt><img src="img/temp/pro08.jpg"></dt>-->
  <!--            <dd>【最家】跳舞兰仿真花干花</dd>-->
  <!--            <dd>￥17.90</dd>-->
  <!--        </dl>-->
  <!--    </a></li>-->


</ul>
<!----------------mask------------------->

<!--<div class="mask"></div>-->
<!-------------------mask内容------------------->
<!--<div class="proDets"><img class="off" src="img/temp/off.jpg"/>-->
<!--    <div class="tit clearfix"><h4 class="fl">【最家】非洲菊仿真花干花</h4><span class="fr">￥17.90</span></div>-->
<!--    <div class="proCon clearfix">-->
<!--        <div class="proImg fl"><img class="list" src="img/temp/proDet.jpg"/>-->
<!--            <div class="smallImg clearfix"><img src="img/temp/proDet01.jpg" data-src="img/temp/proDet01_big.jpg"><img-->
<!--                    src="img/temp/proDet02.jpg" data-src="img/temp/proDet02_big.jpg"><img src="img/temp/proDet03.jpg"-->
<!--                                                                                          data-src="img/temp/proDet03_big.jpg"><img-->
<!--                    src="img/temp/proDet04.jpg" data-src="img/temp/proDet04_big.jpg"></div>-->
<!--        </div>-->
<!--        <div class="fr">-->
<!--            <div class="proIntro"><p>颜色分类</p>-->
<!--                <div class="smallImg clearfix categ"><p class="fl"><img src="img/temp/prosmall01.jpg" alt="白瓷花瓶+20支快乐花"-->
<!--                                                                        data-src="img/temp/proBig01.jpg"></p>-->
<!--                    <p class="fl"><img src="img/temp/prosmall02.jpg" alt="白瓷花瓶+20支兔尾巴草"-->
<!--                                       data-src="img/temp/proBig02.jpg"></p>-->
<!--                    <p class="fl"><img src="img/temp/prosmall03.jpg" alt="20支快乐花" data-src="img/temp/proBig03.jpg"></p>-->
<!--                    <p class="fl"><img src="img/temp/prosmall04.jpg" alt="20支兔尾巴草" data-src="img/temp/proBig04.jpg"></p>-->
<!--                </div>-->
<!--                <p>数量</p>-->
<!--                <div class="num clearfix"><img class="fl sub" src="img/temp/sub.jpg"><span class="fl"-->
<!--                                                                                           contentEditable="true">1</span><img-->
<!--                        class="fl add" src="img/temp/add.jpg">-->
<!--                    <p class="please fl">请选择商品属性!</p></div>-->
<!--            </div>-->
<!--            <div class="btns clearfix"><a href="#2"><p class="buy fl">立即购买</p></a><a href="#2"><p class="cart fr">-->
<!--                加入购物车</p></a></div>-->
<!--        </div>-->
<!--    </div>-->
<!--    <a class="more" href="proDetail.html">查看更多细节</a></div>&lt;!&ndash;返回顶部&ndash;&gt;-->


<div class="gotop"><a onclick="top.location.href='cart.html'">
  <dl class="goCart">
    <dt><img src="img/gt1.png"/></dt>
    <dd>去购<br/>物车</dd>
    <span>1</span></dl>
</a><a href="#" class="dh">
  <dl>
    <dt><img src="img/gt2.png"/></dt>
    <dd>联系<br/>客服</dd>
  </dl>
</a><a href="mygxin.html">
  <dl>
    <dt><img src="img/gt3.png"/></dt>
    <dd>个人<br/>中心</dd>
  </dl>
</a><a href="#" class="toptop" style="display: none;">
  <dl>
    <dt><img src="img/gt4.png"/></dt>
    <dd>返回<br/>顶部</dd>
  </dl>
</a>
  <p>400-800-8200</p></div>

<!--<div class="msk"></div>-->

<!--footer-->
<div class="footer">
  <div class="top">
    <div class="wrapper">
      <div class="clearfix"><a href="#2" class="fl"><img src="img/foot1.png"/></a><span class="fl">7天无理由退货</span>
      </div>
      <div class="clearfix"><a href="#2" class="fl"><img src="img/foot2.png"/></a><span class="fl">15天免费换货</span>
      </div>
      <div class="clearfix"><a href="#2" class="fl"><img src="img/foot3.png"/></a><span class="fl">满599包邮</span>
      </div>
      <div class="clearfix"><a href="#2" class="fl"><img src="img/foot4.png"/></a><span class="fl">手机特色服务</span>
      </div>
    </div>
  </div>
  <p class="dibu">最家家居&copy;2013-2017公司版权所有 京ICP备080100-44备0000111000号<br/>
    违法和不良信息举报电话：188-0130-1238，本网站所列数据，除特殊说明，所有数据均出自我司实验室测试</p></div>


<script src="js/jquery-1.12.4.min.js" type="text/javascript" charset="utf-8"></script>
<script src="js/public.js" type="text/javascript" charset="utf-8"></script>
<script src="js/nav.js" type="text/javascript" charset="utf-8"></script>
<script src="js/pro.js" type="text/javascript" charset="utf-8"></script>
<script src="js/cart.js" type="text/javascript" charset="utf-8"></script>
<script src="js/jquery.cookie.js" type="text/javascript" charset="utf-8"></script>
<script type="text/javascript">

  $(document).ready(function (){
    //页面刷新后检查用户是否登录
    // login();
    //查询所有分类信息
    // findAllCategory();
    //根据分类查询所有商品信息
    findByFid();
  });
//跳转到商品详情页
  function proDetail(id){
    top.location.href = "proDetail.html?id="+id;
  }

  //根据分类查询所有商品信息
  function findByFid(){
    var str = window.parent.location.href;
    var num = str.indexOf("?");
    str = str.substr(num+1);
    let parmt = "?"+str
    // console.log(parmt);
    $.ajax({
      url:"/product/findByFid"+parmt,
      type:"GET",
      dataType:"json",
      success:function (json){
        if (json.state == 200){
          let product = json.data;
          console.log(product);
          $("#product-list").empty();
          for (let i =0;i<product.length;i++){
            let html = '<li><a onclick="proDetail(#{id})">\n' +
                    '        <dl>\n' +
                    '            <dt><img src="#{filename}"></dt>\n' +
                    '            <dd>#{name}</dd>\n' +
                    '            <dd>￥#{price}</dd>\n' +
                    '        </dl>\n' +
                    '    </a></li>';
            html = html.replace(/#{id}/g,product[i].id);
            html = html.replace(/#{filename}/g,product[i].filename);
            html = html.replace(/#{price}/g,product[i].price);
            html = html.replace(/#{name}/g,product[i].name);
            $("#product-list").append(html);
          }
        }else {
          alert("用户加载不成功，请重新加载页面");
        }
      },
      error:function (xhr){
        alert("加载时产生未知的错误："+xhr.status);
      }
    });
  }
  //查询所有分类信息
  function findAllCategory(){
    $.ajax({
      url:"/category/findAll",
      type:"GET",
      dataType:"json",
      success:function (json){
        if (json.state == 200) {
          let parent = json.data.parent;
          let children = json.data.children;
          // console.log(parent);
          // console.log(children);
          $("#list-cate").empty();
          for (let i = 0; i < parent.length; i++) {
            var cate = "cae";
            let html = '<li id="list-cate">\n' +
                    '                                    <a href="flowerDer.html?fid=#{cateId}">#{cateName}</a>\n' +
                    '                                    <div className="sList2" id="cate-list">\n' +
                    '                                        <div className="clearfix" id="children">\n' +
                    // '                                            <a href="proList.html">干花花艺</a><a href="vase_proList.html">花瓶花器</a>\n' +
                    '                                        </div>\n' +
                    '                                    </div>\n' +
                    '                                </li>';

            html = html.replace(/#{cateId}/g, parent[i].cateId);
            html = html.replace(/#{cateName}/g, parent[i].cateName);
            // html = html.replace(/#{catePatentId}/g, parent[i].catePatentId);

            $("#list-cate").append(html);

            // for (let j = 0;j<children.length;j++){
            //     let html2 = '';
            //     if (parent[i].cateId==children[j].catePatentId &&children[j].catePatentId !=0 ){
            //         console.log(parent[i]);
            //         console.log(children[j].cateId);
            //         console.log(children[j].cateName);
            //         console.log(children[j].catePatentId);
            //         let html2 = '<a href="proList.html">#{cateName}</a>';
            //         html2 = html2.replace(/#{cateId}/g,children[j].cateId);
            //         html2 = html2.replace(/#{cateName}/g,children[j].cateName);
            //         // html2 = html2.replace(/#{catePatentId}/g,children[j].catePatentId);
            //         $("#children").append(html2);
            //     }
            //     // $("#cate-list").append(html2);
            // }
            // $("#cate-list").append(html);
          }



        }else {
          alert("用户加载不成功，请重新加载页面");
          location.href="index.html";
        }
      },
      error:function (xhr){
        alert("加载时产生未知的错误："+xhr.status);
      }
    });
  }
  //页面刷新后检查用户是否登录
  function login(){
    let userId = $.cookie("userId");
    var login = document.getElementById("login");
    var reg = document.getElementById("reg");
    if (userId ==null ){
      // location.href = "../login.html";
      login.innerText = "登录";
      login.href="login.html";


    }else {
      login.innerText = userId;
      login.href="#";
      let isAdminLogin = $.cookie("isAdminLogin");
      // console.log("login:"+isAdminLogin);
      if (isAdminLogin == 1){
        reg.innerText = "去后台页面";
        reg.href="manage/index.html";
      }else {
        reg.innerText = "";
      }
    }
  }
</script>
</body>
</html>